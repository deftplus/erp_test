
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)

	Если Параметры.Ключ.Пустая()Тогда
		
		Если Параметры.Свойство("ПланСчетовБД")
			И (НЕ ЗначениеЗаполнено(Объект.ПланСчетовБД)) Тогда
			
			Объект.ПланСчетовБД=Параметры.ПланСчетовБД;
			
		КонецЕсли;
		
	КонецЕсли;
	
	Элементы.ПланСчетов.ТолькоПросмотр=ЗначениеЗаполнено(Объект.ПланСчетовБД);
	
	// СтандартныеПодсистемы.ПодключаемыеКоманды
	ПодключаемыеКоманды.ПриСозданииНаСервере(ЭтотОбъект);
	// Конец СтандартныеПодсистемы.ПодключаемыеКоманды
	
КонецПроцедуры

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)
		
	// СтандартныеПодсистемы.ПодключаемыеКоманды
	ПодключаемыеКомандыКлиентСервер.ОбновитьКоманды(ЭтотОбъект, Объект);
	// Конец СтандартныеПодсистемы.ПодключаемыеКоманды

КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
		
	// СтандартныеПодсистемы.ПодключаемыеКоманды
	ПодключаемыеКомандыКлиент.НачатьОбновлениеКоманд(ЭтотОбъект);
	// Конец СтандартныеПодсистемы.ПодключаемыеКоманды

КонецПроцедуры

&НаКлиенте
Процедура ПослеЗаписи(ПараметрыЗаписи)
	
	// СтандартныеПодсистемы.ПодключаемыеКоманды
	ПодключаемыеКомандыКлиент.ПослеЗаписи(ЭтотОбъект, Объект, ПараметрыЗаписи);
	// Конец СтандартныеПодсистемы.ПодключаемыеКоманды  
	
	Оповестить("ЗаписанСчетМСФО",Объект.ПланСчетовБД);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура КодПриИзменении(Элемент)
	
	Объект.Код = СтрЗаменить(Объект.Код, " ", "");
	Пока Прав(Объект.Код, 1) = "." Цикл
		Объект.Код = Лев(Объект.Код, СтрДлина(Объект.Код)-1);
	КонецЦикла;
	
	Объект.КодБыстрогоВыбора = СокрЛП(СтрЗаменить(Объект.Код, ".", ""));
	
	Объект.Родитель = ПолучитьРодителя(Объект.Код);
	
КонецПроцедуры

#КонецОбласти

#Область СтандартныеПодсистемы

// СтандартныеПодсистемы.ПодключаемыеКоманды
&НаКлиенте
Процедура Подключаемый_ВыполнитьКоманду(Команда)
	ПодключаемыеКомандыКлиент.ВыполнитьКоманду(ЭтотОбъект, Команда, Объект);
КонецПроцедуры

&НаСервере
Процедура Подключаемый_ВыполнитьКомандуНаСервере(Контекст, Результат) Экспорт
	ПодключаемыеКоманды.ВыполнитьКоманду(ЭтотОбъект, Контекст, Объект, Результат);
КонецПроцедуры

&НаКлиенте
Процедура Подключаемый_ОбновитьКоманды()
	ПодключаемыеКомандыКлиентСервер.ОбновитьКоманды(ЭтотОбъект, Объект);
КонецПроцедуры
// Конец СтандартныеПодсистемы.ПодключаемыеКоманды

#КонецОбласти

#Область ВспомогательныеПроцедурыФункции

&НаСервереБезКонтекста
Функция ПолучитьРодителя(КодСчета)
	Возврат ПланыСчетов.МСФО.ПолучитьРодителя(КодСчета);
КонецФункции

&НаКлиенте
Процедура ПланСчетовПриИзменении(Элемент)
	ПриИзмененииПланаСчетов();	
КонецПроцедуры

&НаСервере
Процедура ПриИзмененииПланаСчетов()
	
	ПланСчетовИсточник = ОбщегоНазначения.ЗначениеРеквизитаОбъекта(Объект.ПланСчетовБД, "ПланСчетовИсточник");
	Элементы.СчетИсточник.ПараметрыВыбора = МСФОУХ.ПолучитьПараметрыВыбораСчетаБД(ПланСчетовИсточник);

КонецПроцедуры

#КонецОбласти
