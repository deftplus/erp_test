
Функция СформироватьОтчет() Экспорт
	
	Этапы  = Неопределено;
	Уровни = Неопределено;
		
	Если ЗначениеЗаполнено(ЭкземплярПроцесса)  Тогда
		Этапы = МодульУправленияПроцессамиУХ.ПолучитьТаблицуЭтаповЭкземпляраПроцесса(ЭкземплярПроцесса, Уровни,ТабличноеПоле_ЛинейнаяСвязь,ТабличноеПолеНачальныхНастроек,ПланируемаяДатаЗавершения,НакопленноеОтклонение);
	Иначе
		Этапы = МодульУправленияПроцессамиУХ.ПолучитьТаблицуЭтапов(ШаблонПроцесса, Уровни,ТабличноеПоле_ЛинейнаяСвязь,ТабличноеПолеНачальныхНастроек);
	КонецЕсли;
	СоответствиеРисунковИЭтапов.Очистить();
	
	Возврат МодульУправленияПроцессамиУХ.ВывестиДиаграммуЭтапов(Этапы, Уровни,СоответствиеРисунковИЭтапов,ЭкземплярПроцесса);
	
КонецФункции


Функция ПолучитьТаблицуЭтапов() Экспорт
	
	Этапы  = Неопределено;
	Уровни = Неопределено;
		
	Если ЗначениеЗаполнено(ЭкземплярПроцесса)  Тогда
		Этапы = МодульУправленияПроцессамиУХ.ПолучитьТаблицуЭтаповЭкземпляраПроцесса(ЭкземплярПроцесса, Уровни,ТабличноеПоле_ЛинейнаяСвязь,ТабличноеПолеНачальныхНастроек,ПланируемаяДатаЗавершения,НакопленноеОтклонение);
	Иначе
		Этапы = МодульУправленияПроцессамиУХ.ПолучитьТаблицуЭтапов(ШаблонПроцесса, Уровни,ТабличноеПоле_ЛинейнаяСвязь,ТабличноеПолеНачальныхНастроек);
	КонецЕсли;
	
	
	Возврат Этапы;
	
КонецФункции
