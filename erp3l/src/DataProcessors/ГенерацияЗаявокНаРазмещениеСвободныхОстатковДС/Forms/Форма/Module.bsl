
&НаСервере
Процедура ЗаполнитьТаблицуПеремещенийНаСервере()
	
	ОбработкаОбъект = РеквизитФормыВЗначение("Объект");
	ОбработкаОбъект.ЗаполнитьТаблицуЗаявокНаРазмещение();
	ЗначениеВРеквизитФормы(ОбработкаОбъект,"Объект");
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьТаблицуПеремещений(Команда)
	
	ЗаполнитьТаблицуПеремещенийНаСервере();
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Объект.ДатаОстатков = ТекущаяДатаСеанса();
	
	ЗаполнитьТаблицуПеремещенийНаСервере();
	
КонецПроцедуры

&НаСервере
Функция СформироватьЗаявкиНаСервере()
	РезультатФункции = Ложь;	
	ОбработкаОбъект = РеквизитФормыВЗначение("Объект");
	РезультатФункции = ОбработкаОбъект.СформироватьЗаявкиНаРазмещение();
	ЗначениеВРеквизитФормы(ОбработкаОбъект,"Объект");
	Возврат РезультатФункции;
КонецФункции

&НаКлиенте
Процедура СформироватьЗаявки(Команда)
	
	РезультатФормирования = СформироватьЗаявкиНаСервере();
	Если РезультатФормирования Тогда
		КартинкаОповещения = БиблиотекаКартинок.Информация32;
		ТекстОповещения = НСтр("ru = 'Заявки сформированы'");
		ПояснениеОповещения = НСтр("ru = 'Завершено формирование заявок на размещение свободных остатков денежных средств'");
		ПоказатьОповещениеПользователя(ТекстОповещения, , ПояснениеОповещения, КартинкаОповещения);
	Иначе
		ПоказатьПредупреждение(, НСтр("ru = 'Заявки не были сформированы.'"));
	КонецЕсли;
	ЗаполнитьТаблицуПеремещенийНаСервере();
	
КонецПроцедуры
