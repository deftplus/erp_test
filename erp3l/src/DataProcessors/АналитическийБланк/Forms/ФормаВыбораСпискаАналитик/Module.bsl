
&НаКлиенте
Процедура Применить(Команда)
		
	СписокАналитик = Новый СписокЗначений;
	Для Каждого Эл Из ТабДоступныхАналитик Цикл	
		
		Если НЕ Эл.Выбран Тогда
			Продолжить;
		КонецЕсли;	
		
		Нстр = Списоканалитик.Добавить();
		Нстр.Пометка 			= Эл.Выбран;
		Нстр.Представление 	= Эл.ИмяАналитики;
		Нстр.Значение 			= Эл.Коданалитики;		
	КонецЦикла;	
	
	Закрыть(Новый Структура("СписокАналитик",СписокАналитик));
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
			
	ТекущиеАналитики   = ЗначениеИзСтрокиВнутр(Параметры.ТекущиеАналитики);
	ДоступныеАналитики = ПолучитьИзВременногоХранилища(Параметры.ДоступныеАналитикиАдрес);
	
	Для Каждого Эл Из ДоступныеАналитики Цикл	
		
		Нстр = ТабДоступныхАналитик.Добавить();

		Если НЕ ТекущиеАналитики.НайтиСтроки(Новый Структура("АналитикаКод",Эл.АналитикаКод)).Количество()=0 Тогда
			 Нстр.Выбран = Истина;
		КонецЕсли;	

		Нстр.ИмяАналитики 	= Эл.АналитикаПредставление;
		Нстр.КодАналитики 	= Эл.АналитикаКод;		
		
	КонецЦикла;	
	
КонецПроцедуры
