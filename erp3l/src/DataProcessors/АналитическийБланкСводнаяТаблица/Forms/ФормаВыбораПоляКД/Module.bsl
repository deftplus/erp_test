
&НаКлиенте
Процедура Применить(Команда)
	
	СтрокаОтбора = КомпоновщикНастроек.Настройки.Порядок.ДоступныеПоляПорядка.ПолучитьОбъектПоИдентификатору(Элементы.КомпоновщикНастроекНастройкиПорядокДоступныеПоляПорядка.ТекущаяСтрока);
	Если СтрокаОтбора.Папка Тогда
		СтандартнаяОбработка = Ложь;
		Возврат;
	КонецЕсли;
	
	СтруктураОтвета = Новый Структура();
	СтруктураОтвета.Вставить("Поле",СтрокаОтбора.Поле);
	СтруктураОтвета.Вставить("Заголовок",СтрокаОтбора.Заголовок);
    СтруктураОтвета.Вставить("ТипЗначения",СтрокаОтбора.ТипЗначения);
	
	Закрыть(СтруктураОтвета);
		
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
		
	СКДТекущегоПоля = ПолучитьИзВременногоХранилища(Параметры.СКДТекущегоПоляАдрес);
	КомпоновщикНастроек.Инициализировать(Новый ИсточникДоступныхНастроекКомпоновкиДанных(ПоместитьВоВременноеХранилище(СКДТекущегоПоля, УникальныйИдентификатор)));
	
	Параметры.Свойство("АналитикаСубконто", ПолеВыбораКод)
	
КонецПроцедуры

&НаКлиенте
Процедура КомпоновщикНастроекНастройкиПорядокДоступныеПоляПорядкаВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
		
	Применить(Неопределено);
	
КонецПроцедуры

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	Если ПолеВыбораКод <> "" тогда
		
		ПолеКомпоновки = Новый ПолеКомпоновкиДанных(ПолеВыбораКод);
		ДоступноеПоле = КомпоновщикНастроек.Настройки.Порядок.ДоступныеПоляПорядка.НайтиПоле(ПолеКомпоновки);
		
		Если ДоступноеПоле <> Неопределено тогда
			Элементы.КомпоновщикНастроекНастройкиПорядокДоступныеПоляПорядка.ТекущаяСтрока = КомпоновщикНастроек.Настройки.Порядок.ДоступныеПоляПорядка.ПолучитьИдентификаторПоОбъекту(ДоступноеПоле);
		КонецЕсли;
		
	КонецЕсли;
	
КонецПроцедуры

