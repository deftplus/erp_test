
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Запрос = Новый Запрос;
	Запрос.Текст = "ВЫБРАТЬ
	|	ПравилаОбработки.Ссылка КАК Правило
	|ИЗ
	|	Справочник.ПравилаОбработки КАК ПравилаОбработки
	|ГДЕ
	|	ПравилаОбработки.Владелец В (&Владелец)
	|	И ПравилаОбработки.ПометкаУдаления = ЛОЖЬ";
	
	Запрос.УстановитьПараметр("Владелец",Параметры.ВидыОтчетаОтбор);
	
	Результат = Запрос.Выполнить().Выгрузить();
	
	нСтр = СписокПравилОбработки.Добавить();
	нСтр.Правило = Нстр("ru = 'Заполнить по регламенту'");

	нСтр = СписокПравилОбработки.Добавить();
	нСтр.Правило = Нстр("ru = 'Консолидировать периметр'");

	Для Каждого Стр Из Результат Цикл
		нСтр = СписокПравилОбработки.Добавить();
		нСтр.Правило = Стр.Правило;
	КонецЦикла;	 
	
КонецПроцедуры

&НаКлиенте
Процедура ВычислитьПоПравилу(Команда)
	
	Закрыть(Новый Структура("ПравилоОбработки",Элементы.СписокПравилОбработки.ТекущиеДанные.Правило));
		
КонецПроцедуры

&НаКлиенте
Процедура СписокПравилОбработкиВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ВычислитьПоПравилу(Неопределено);
	
КонецПроцедуры
