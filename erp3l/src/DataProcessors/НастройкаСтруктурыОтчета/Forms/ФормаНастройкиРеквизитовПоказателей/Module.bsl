
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	ТипОбъектаОповещения = Справочники.СправочникиБД.НайтиПоНаименованию("ПоказателиОтчетов",,,Справочники.ТипыБазДанных.ТекущаяИБ);
	
	РеквизитыПоказателей.ЗагрузитьЗначения(Параметры.РеквизитыПоказателей.ВыгрузитьЗначения());
	
КонецПроцедуры

&НаКлиенте
Процедура РеквизитыПоказателейВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	СтруктураПараметров = Новый Структура;
	СтруктураПараметров.Вставить("ОграничиватьСсылочные",	 Истина);
	СтруктураПараметров.Вставить("ОграничениеТипа",			 Неопределено);
	СтруктураПараметров.Вставить("ТипОбъектаОповещения",	 ТипОбъектаОповещения);
	РежимОткрытия = РежимОткрытияОкнаФормы.БлокироватьОкноВладельца;
	Оповещение = Новый ОписаниеОповещения("ВыборРеквизитаОкончание", ЭтаФорма);
	ОткрытьФорму("ВнешняяОбработка.КонструкторВО.Форма.ФормаВыбораРеквизитов", СтруктураПараметров, ЭтаФорма, , , , Оповещение, РежимОткрытия);
	
КонецПроцедуры


&НаКлиенте
Процедура ВыборРеквизитаОкончание(Результат, ДополнительныеПараметры) Экспорт
	
	Если Результат = Неопределено Тогда
		Возврат;
	КонецЕсли;	
	
	РеквизитыПоказателей.НайтиПоИдентификатору(Элементы.РеквизитыПоказателей.ТекущаяСтрока).Значение = Строка(Результат.Поле);
	
КонецПроцедуры

&НаКлиенте
Процедура РеквизитыПоказателейПередНачаломДобавления(Элемент, Отказ, Копирование, Родитель, Группа, Параметр)
	
	СтруктураПараметров = Новый Структура;
	СтруктураПараметров.Вставить("ОграничиватьСсылочные",	 Истина);
	СтруктураПараметров.Вставить("ОграничениеТипа",			 Неопределено);
	СтруктураПараметров.Вставить("ТипОбъектаОповещения",	 ТипОбъектаОповещения);
	РежимОткрытия = РежимОткрытияОкнаФормы.БлокироватьОкноВладельца;
	Оповещение = Новый ОписаниеОповещения("ВыборРеквизитаОкончание", ЭтаФорма);
	ОткрытьФорму("Обработка.НастройкаСтруктурыОтчета.Форма.ФормаВыбораРеквизитов", СтруктураПараметров, ЭтаФорма, , , , Оповещение, РежимОткрытия);

	
КонецПроцедуры

&НаКлиенте
Процедура Выбрать(Команда)
	
	ЭтаФорма.Закрыть(РеквизитыПоказателей);
	
КонецПроцедуры

&НаКлиенте
Процедура РеквизитыПоказателейПередУдалением(Элемент, Отказ)
	
	Если Элемент.ТекущиеДанные.Значение = "ЕстьПоказатель" Тогда
		 Отказ = Истина;
	КонецЕсли;	
	
КонецПроцедуры



