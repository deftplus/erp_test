
&НаКлиенте
Процедура ТипПериодическихПлатежейПриИзменении(Элемент)
	
	ПриИзмененииТипаПериодическихОпераций();	
	
КонецПроцедуры

&НаСервере
Процедура ПриИзмененииТипаПериодическихОпераций()
	
	ОбновитьНаименование();
	УстановитьВидимость();
	
КонецПроцедуры // ПриИзмененииТипаПериодическихОпераций()

&НаСервере
Процедура ОбновитьНаименование()
	
	Если Объект.ТипОперацииФИ=Перечисления.ТипыОперацийГрафикаФинансовыхИнструментов.Проценты Тогда
		
		 ТекстНаименования=?(Объект.КапитализацияПроцентов,НСтр("ru = 'Сложные проценты'"),НСтр("ru = 'Проценты'"));
		 
	 Иначе
		 
		 ТекстНаименования=""+Объект.ТипОперацииФИ;
		 
	КонецЕсли;
		 	
	Если Объект.ТипОперацииФИ=Перечисления.ТипыОперацийГрафикаФинансовыхИнструментов.ОсновнойДолг Тогда
		
		ТекстНаименования=ТекстНаименования+", "+Объект.ПриходРасход;
		
	КонецЕсли;
	
	ТекстНаименования=ТекстНаименования+", "+Объект.ТипСтавки;
	
	Если Объект.ТипСтавки=Перечисления.ТипыСтавокДляРасчетаПериодическихОпераций.Фиксированная Тогда
		
		ТекстНаименования=ТекстНаименования+" "+Объект.Ставка+"%";
		
	КонецЕсли;
		
	Если ЗначениеЗаполнено(Объект.СпособРасчетаБазы) И (НЕ Объект.ТипОперацииФИ=Перечисления.ТипыОперацийГрафикаФинансовыхИнструментов.Проценты) Тогда
		
		ТекстНаименования=ТекстНаименования+", " + НСтр("ru = 'база'") + ": "+Объект.СпособРасчетаБазы;
		
	КонецЕсли;
	
	ТекстНаименования=ТекстНаименования+", "+Объект.СпособРасчетаГрафикаОпераций;
	
	Объект.Наименование=ТекстНаименования;
		
КонецПроцедуры // ОбновитьНаименование()

&НаКлиенте
Процедура СпособРасчетаБазыПриИзменении(Элемент)
	
	ОбновитьНаименование();
	
КонецПроцедуры

&НаКлиенте
Процедура ТипСтавкиПриИзменении(Элемент)
	
	ПриИзмененииТипаСтавки();
	
	ОбновитьНаименование();
	
КонецПроцедуры

&НаСервере
Процедура ПриИзмененииТипаСтавки()
	
	Если НЕ ЗначениеЗаполнено(Объект.НачалоДействияДифференцированнойСтавки) Тогда
		
		Объект.НачалоДействияДифференцированнойСтавки=Перечисления.СпособОпределенияДатыНачалаДействияСтавки.ОтНачалаДействияФинансовогоИнструмента;
		
	КонецЕсли;
	
	УстановитьВидимость();
	ОбновитьНаименование();
		
КонецПроцедуры // ПриИзмененииТипаСтавки()

&НаСервере
Процедура УстановитьВидимость()
	
	Элементы.КапитализацияПроцентов.Видимость			=(Объект.ТипОперацииФИ=Перечисления.ТипыОперацийГрафикаФинансовыхИнструментов.Проценты);
	Элементы.СтавкаАбсолютноеЗначение.Видимость			=(НЕ Объект.ТипОперацииФИ=Перечисления.ТипыОперацийГрафикаФинансовыхИнструментов.Проценты);
	Элементы.Ставка.Видимость							=(Объект.ТипСтавки=Перечисления.ТипыСтавокДляРасчетаПериодическихОпераций.Фиксированная);
	Элементы.ГруппаДифференцированнаяСтавка.Видимость	=(Объект.ТипСтавки=Перечисления.ТипыСтавокДляРасчетаПериодическихОпераций.Дифференцированная);
	Элементы.ГруппаПлавающаяСтавка.Видимость			=(Объект.ТипСтавки=Перечисления.ТипыСтавокДляРасчетаПериодическихОпераций.Плавающая);
	
	Элементы.ТипОперацииФИ.Видимость					=(НЕ Объект.ТипПериодическихПлатежей = Перечисления.ВидыФинансовыхИнструментов.РасчетыСКонтрагентами);
		
КонецПроцедуры // УстановитьВидимость() 

&НаКлиенте
Процедура СтавкаПриИзменении(Элемент)
	
	ОбновитьНаименование();
	
КонецПроцедуры

&НаСервере
Процедура ПриИзмененииСпособаРасчетаГрафикаПлатежей()
	
	Объект.ПериодичностьОпределенияПлавающейСтавки		= Объект.СпособРасчетаГрафикаОпераций.Периодичность;
	Объект.СпособОпределенияДатыПлавающейСтавки			= Объект.СпособРасчетаГрафикаОпераций.СпособОпределенияДатыОперации;
	Объект.ПериодичностьДифференцированнойСтавки		= Объект.СпособРасчетаГрафикаОпераций.Периодичность;
	Объект.СдвигПериодовПлавающейСтавки					= Объект.СпособРасчетаГрафикаОпераций.СдвигПериодов;
	Объект.ПериодичностьСдвигаПериодовПлавающейСтавки	= Объект.СпособРасчетаГрафикаОпераций.ПериодичностьСдвигаПериодов;
	
	ОбновитьНаименование();
		
КонецПроцедуры // ПриИзмененииТипаСтавки()

&НаКлиенте
Процедура СпособРасчетаГрафикаПлатежейПриИзменении(Элемент)
	
	ПриИзмененииСпособаРасчетаГрафикаПлатежей();
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УстановитьВидимость();
	
	Если НЕ (ЗначениеЗаполнено(Объект.Ссылка) ИЛИ ЗначениеЗаполнено(Параметры.ЗначениеКопирования)) Тогда
		
		Объект.ТипСтавки=Перечисления.ТипыСтавокДляРасчетаПериодическихОпераций.Фиксированная;
		Объект.СпособРасчетаДней=Справочники.СпособыРасчетаДнейПериодическихОпераций.ГодФактМесяцФакт;
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура КапитализацияПроцентовПриИзменении(Элемент)
	
	ОбновитьНаименование();
	
КонецПроцедуры
