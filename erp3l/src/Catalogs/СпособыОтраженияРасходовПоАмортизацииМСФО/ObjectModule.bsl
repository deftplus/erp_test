#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

///////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ


Процедура ПередЗаписью(Отказ)
	
	Если ЭтотОбъект.Способы.Количество() = 0 Тогда
		
		//Актуальными считаем реквизиты - заполним ТЧ
		
		НовыйСпособ = ЭтотОбъект.Способы.Добавить();
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(НовыйСпособ.СчетЗатрат, ЭтотОбъект.СчетЗатрат);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(НовыйСпособ.Субконто1, ЭтотОбъект.СчетЗатратСубконто1);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(НовыйСпособ.Субконто2, ЭтотОбъект.СчетЗатратСубконто2);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(НовыйСпособ.Субконто3, ЭтотОбъект.СчетЗатратСубконто3);
						
	ИначеЕсли ЭтотОбъект.Способы.Количество() = 1 Тогда
		
		//Актуальными считаем Реквизиты - обновим ТЧ по реквизитам
		
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатрат, 			ЭтотОбъект.Способы[0].СчетЗатрат);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатратСубконто1, 	ЭтотОбъект.Способы[0].Субконто1);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатратСубконто2, 	ЭтотОбъект.Способы[0].Субконто2);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатратСубконто3, 	ЭтотОбъект.Способы[0].Субконто3);
		
	Иначе
		
		//Когда записей > 1, тогда актуальными считаем ТЧ - очистим реквизиты
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатрат, Справочники.СчетаБД.ПустаяСсылка());
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатратСубконто1, Неопределено);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатратСубконто2, Неопределено);
		ОбщегоНазначенияУХ.УстановитьНовоеЗначение(ЭтотОбъект.СчетЗатратСубконто3, Неопределено);
				
	КонецЕсли;
	
	ОбщегоНазначенияУХ.УстановитьНовоеЗначение(Описание, Справочники.СпособыОтраженияРасходовПоАмортизацииМСФО.ПолучитьОписание(ЭтотОбъект));
		
КонецПроцедуры

#КонецЕсли
Процедура ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	Если Способы.Итог("Коэффициент") <> 100 Тогда
		ОбщегоНазначенияУХ.СообщитьОбОшибке(НСтр("ru = 'Сумма коэффициентов не равна 100'"), Отказ);
	КонецЕсли;	
	
КонецПроцедуры
