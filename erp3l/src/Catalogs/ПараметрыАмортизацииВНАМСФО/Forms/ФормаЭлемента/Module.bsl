
#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриЧтенииНаСервере(ТекущийОбъект)	
	ПодготовитьФорму();	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Ключ.Пустая() Тогда
		ПодготовитьФорму();
	КонецЕсли;
	
	ОбновитьВидимостьПараметровАмортизации(ЭтаФорма);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовФормы

&НаКлиенте
Процедура СпособНачисленияАмортизацииПриИзменении(Элемент)
	
	ОбновитьВидимостьПараметровАмортизации(ЭтаФорма);
	ОбновитьОписание();
	
КонецПроцедуры

&НаКлиенте
Процедура СрокПолезногоИспользованияПриИзменении(Элемент)
	ОбновитьОписание();
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура ПодготовитьФорму()

	ЭтаФорма.КэшируемыеЗначения = Новый Структура;
	ЭтаФорма.КэшируемыеЗначения.Вставить("СпособыНачисленияАмортизации", МСФОВНАВызовСервераУХ.ПолучитьВозможныеСпособыНачисленияАмортизации());

КонецПроцедуры

&НаСервере
Процедура ОбновитьОписание()

	 //Объект.Описание = Справочники.ПараметрыАмортизацииВНАМСФО.ПолучитьОписание(Объект);

КонецПроцедуры // ()

&НаКлиенте
Процедура ЗаполнитьНаименование(Команда)
	ЗаполнитьНаименованиеСервер();
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьНаименованиеСервер()
	Объект.Наименование = Справочники.ПараметрыАмортизацииВНАМСФО.ПолучитьАвтоНаименование(Объект);
КонецПроцедуры

&НаКлиентеНаСервереБезКонтекста
Процедура ОбновитьВидимостьПараметровАмортизации(Форма)
	
	МСФОКлиентСерверУХ.ОбновитьОтображениеПараметровАмортизации(
		Форма, 
		Форма.Объект.СпособНачисленияАмортизации, 
		ПолучитьРеквизитыПараметровАмортизации(),
		Форма.КэшируемыеЗначения.СпособыНачисленияАмортизации);

КонецПроцедуры
	
&НаКлиентеНаСервереБезКонтекста
Функция ПолучитьРеквизитыПараметровАмортизации()

	Результат = Новый Структура;
	
	Результат.Вставить("КоэффициентУскорения", 			"КоэффициентУскорения");
	Результат.Вставить("ПараметрВыработки", 			"ПараметрВыработки");
	Результат.Вставить("ПредполагаемыйОбъемПродукции", 	"ПредполагаемыйОбъемПродукции");
	Результат.Вставить("СрокПолезногоИспользования", 	"СрокПолезногоИспользования");
	
	Возврат Результат;

КонецФункции

#КонецОбласти
