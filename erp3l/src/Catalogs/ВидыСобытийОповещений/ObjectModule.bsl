// Возвращает для текущего вида события категорию по умолчанию.
Функция ПолучитьКатегориюПоУмолчанию() Экспорт
	РезультатФункции = Справочники.КатегорииСобытийОповещений.ПустаяСсылка();
	СтруктураНастроек = МодульУправленияОповещениямиУХ.ПолучитьПоставляемыеДанныеПоВидуСобытия(Ссылка);
	РезультатФункции = ОбщегоНазначенияКлиентСервер.СвойствоСтруктуры(СтруктураНастроек, "КатегорияСобытия", Справочники.КатегорииСобытийОповещений.ПустаяСсылка());
	Возврат РезультатФункции;
КонецФункции

// Возвращает для текущего вида события описание по умолчанию.
Функция ПолучитьОписаниеПоУмолчанию() Экспорт
	РезультатФункции = Справочники.КатегорииСобытийОповещений.ПустаяСсылка();
	СтруктураНастроек = МодульУправленияОповещениямиУХ.ПолучитьПоставляемыеДанныеПоВидуСобытия(Ссылка);
	РезультатФункции = ОбщегоНазначенияКлиентСервер.СвойствоСтруктуры(СтруктураНастроек, "Описание", "");
	Возврат РезультатФункции;
КонецФункции

Процедура ПередЗаписью(Отказ)
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	Если Не ЭтоГруппа Тогда
		// Выставим категорию по умоланию.
		Если НЕ ЗначениеЗаполнено(КатегорияСобытия) Тогда
			КатегорияСобытия = ПолучитьКатегориюПоУмолчанию();
		Иначе
			// Уже есть категория. Не изменяем её.
		КонецЕсли;
		// Выставим описание по умолчанию.
		Если НЕ ЗначениеЗаполнено(Описание) Тогда
			Описание = ПолучитьОписаниеПоУмолчанию();
		Иначе
			// Уже есть категория. Не изменяем её.
		КонецЕсли;
	Иначе
		// Для группы не выставляем категорию и описание.
	КонецЕсли;
КонецПроцедуры
