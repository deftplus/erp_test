#Область ОбработкаОсновныхСобытийФормы


&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	АккредитацияПоставщиковУХ.ПриСозданииНаСервереФормыВнешнегоПоставщика(
		ЭтаФорма, 
		Отказ, 
		"Список", 
		"Ссылка", 
		"Ссылка", 
		Истина);
	Если Отказ Тогда
		Возврат;
	КонецЕсли;
	ЗакупочнаяПроцедура = Неопределено;
	Если НЕ Параметры.Свойство("ЗакупочнаяПроцедура", ЗакупочнаяПроцедура) Тогда
		Отказ = Истина;
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = НСтр(
			"ru = 'Форму выбора аккредитованных поставщиков можно открыть только с указанием закупочной процедуры.'");
		Сообщение.Сообщить();
		Возврат;
	КонеЦЕсли;
	ПоказыватьТолькоАккредитованных = Параметры.ПоказыватьТолькоАккредитованных;
	Организации.ЗагрузитьЗначения(Справочники.ЗакупочныеПроцедуры.ОрганизацииДляЗаключенияДоговора(ЗакупочнаяПроцедура));
	ДатаСреза = 
		АккредитацияПоставщиковУХ.ПолучитьДатуПоискаАккредитованныхПоставщиков(
			ЗакупочнаяПроцедура);
	УстановитьОтборСписка();
КонецПроцедуры


#КонецОбласти

#Область ОбработкаСобытийЭлементовФормы


&НаКлиенте
Процедура ДатаСрезаПриИзменении(Элемент)
	УстановитьОтборСписка();
КонецПроцедуры

&НаКлиенте
Процедура ПоказыватьТолькоАккредитованныхПриИзменении(Элемент)
	УстановитьОтборСписка();
КонецПроцедуры


#КонецОбласти

#Область СлужебныеПроцедурыНаКлиенте


#КонецОбласти

#Область СлужебныеПроцедурыНаСервере


&НаСервере
Процедура УстановитьОтборСписка()
	Список.Параметры.УстановитьЗначениеПараметра("Организации", Организации);
	Список.Параметры.УстановитьЗначениеПараметра("ДатаСреза", ДатаСреза);
	Список.Параметры.УстановитьЗначениеПараметра(
		"ПоказыватьТолькоАккредитованных", ПоказыватьТолькоАккредитованных);
КонецПроцедуры


#КонецОбласти






