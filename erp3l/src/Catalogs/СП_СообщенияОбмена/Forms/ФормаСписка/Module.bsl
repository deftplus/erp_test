
&НаСервере
Процедура РаспознатьВыбранныеСообщенияНаСервере(МассивИдентификаторов)
	
	
	для каждого ид из МассивИдентификаторов цикл
		
		ссылкаНаСообщение=ид;
		ОбъектСообщения=ссылкаНаСообщение.ПОлучитьОбъект();
		ОбъектСообщения.СсылкаНаОбъект=неопределено;
		ОбъектСообщения.СостояниеСообщения=Перечисления.СП_СостоянияСообщений.Новое;
		ОбъектСообщения.ТекстОшибки=""; ОбъектСообщения.Результатв1С="Обрабатывается";
		ОбъектСообщения.Записать();
			
		
	КонецЦикла;

	МассивПараметров=Новый Массив();
	МассивПараметров.Добавить(истина);
	МассивПараметров.Добавить(МассивИдентификаторов);
	Массивпараметров.Добавить(ложь);
	МассивПараметров.Добавить(Справочники.инт_СоответствиеОбъектовЗначениямИнтеграции.ПустаяСсылка());
	
	задание=ФоновыеЗадания.Выполнить("СП_РаботаССообщениями.ллл_ВыполнитьОбработкуВходящихСообщений",МассивПараметров);
		
КонецПроцедуры

&НаКлиенте
Процедура РаспознатьВыбранныеСообщения(Команда)                      
	
	МассивИдентификаторов=Новый Массив();
	
	для каждого стр из Элементы.Список.ВыделенныеСтроки цикл
		МассивИдентификаторов.Добавить(стр);			
		
	КонецЦикла;	
	
	РаспознатьВыбранныеСообщенияНаСервере(МассивИдентификаторов);
КонецПроцедуры
