
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если НЕ Параметры.Свойство("ОбъектИсточник") Тогда
		
		Возврат;
		
	КонецЕсли;
	
	ОтборИсточники=Список.Отбор.Элементы;
	ОбъектИсточник=Параметры.ОбъектИсточник;

	Если НЕ ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.ТипыБазДанных") Тогда
		
		Элементы.Список.Отображение=ОтображениеТаблицы.Список;
		
	КонецЕсли;
	
	ЭтаФорма.АвтоЗаголовок=Ложь;
		
	Элементы.КодУпрощеннойФормулы.Видимость=Ложь;
	Элементы.Код.Видимость=Ложь;
	Элементы.НазначениеРасчетов.Видимость=Ложь;
	Элементы.ПотребительРасчета.Видимость=Ложь;
	Элементы.СпособПолучения.Видимость=Ложь;
	Элементы.СпособИспользования.Видимость=Ложь;
	Элементы.НеИспользуется.Видимость=Ложь;

	Элементы.КоррСчет.Видимость=Ложь;
		
	УсловиеОтбора=ОтборИсточники.Добавить(Тип("ЭлементОтбораКомпоновкиДанных"));
	УсловиеОтбора.ЛевоеЗначение=Новый ПолеКомпоновкиДанных("СпособИспользования");
	УсловиеОтбора.ВидСравнения = ВидСравненияКомпоновкиДанных.Равно;
	УсловиеОтбора.ПравоеЗначение=Перечисления.СпособыИспользованияОперандов.ПроизвольныеДанные;
	
	Если ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.СчетаБД") Тогда
		
		УстановитьОтборПоИсточнику("Счет",ОбъектИсточник);
		Элементы.КоррСчет.Видимость=Истина;
	
	ИначеЕсли ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.РегистрыНакопленияБД")
		ИЛИ ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.РегистрыСведенийБД")
		ИЛИ ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.РегистрыБухгалтерииБД") Тогда
		
		УстановитьОтборПоИсточнику("РегистрБД",ОбъектИсточник);
		
	ИначеЕсли ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.СправочникиБД")
		ИЛИ ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.ДокументыБД") Тогда
		
		УстановитьОтборПоИсточнику("ОбъектБД",ОбъектИсточник);
		
	ИначеЕсли ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.ТабличныеЧастиБД") Тогда
		
		УстановитьОтборПоИсточнику("ТабличнаяЧастьБД",ОбъектИсточник);
		
	ИначеЕсли ТипЗнч(Параметры.ОбъектИсточник)=Тип("СправочникСсылка.ТипыБазДанных") Тогда
		
		Элементы.ОбъектИсточник.Видимость=Истина;
		УстановитьОтборПоИсточнику("ТипБД",ОбъектИсточник);
		
	КонецЕсли;
	
КонецПроцедуры
		
&НаСервере
Процедура УстановитьОтборПоИсточнику(ПолеИсточника,ОбъектИсточник)
		
	ОбщегоНазначенияКлиентСерверУХ.УстановитьЭлементОтбора(Список.Отбор,ПолеИсточника,ОбъектИсточник,ВидСравненияКомпоновкиДанных.Равно,,Истина);
	
	Заголовок=СтрШаблон(Нстр("ru = 'Шаблоны источников для %1'"),ОбъектИсточник);
	
КонецПроцедуры // УстановитьОтборПоИсточнику() 

&НаКлиенте
Процедура ОбъектИсточникПриИзменении(Элемент)
	
	УстановитьОтборПоИсточнику("ТипБД",ОбъектИсточник);
	
КонецПроцедуры

		
		
