
#Область ОбработкаОсновныхСобытийФормы


&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	Если НЕ ПользователиСлужебныйПовтИсп.ЭтоСеансВнешнегоПользователя()
			И НЕ ЗначениеЗаполнено(Параметры.АнкетаПоставщика) Тогда
		Отказ = Истина;
		Возврат;
	КонецЕсли;
	АккредитацияПоставщиковУХ.УстановитьРеквизитыФормыСпискаДляПоставщика(ЭтаФорма);
	Если НЕ ЭтаФорма.ЭтоВнешнийПользователь Тогда
		АнкетаПоставщика = Параметры.АнкетаПоставщика;
	КонецЕсли;
	КонтрагентПоставщика = АнкетаПоставщика.Контрагент;
	Если Не ЗначениеЗаполнено(КонтрагентПоставщика) Тогда
		Отказ = Истина;
		Сообщение = Новый СообщениеПользователю;
		Сообщение.Текст = НСтр("ru = 'Поставщику не назначен контрагент. Форма не может быть открыта.'");
		Сообщение.Сообщить();
		Возврат;
	КонецЕсли;
	Список.ТекстЗапроса = СтрЗаменить(Список.ТекстЗапроса,
		"&КонтрагентДоговораДляЗамены",
		?(ИдентификацияПродуктаУХКлиентСервер.ЭтоЕХ(),
			"ПланПоставокПоДоговорам.Договор.Контрагент",
			"ПланПоставокПоДоговорам.Договор.Владелец"));
	УстановитьПараметрыДинамическихСписков();
КонецПроцедуры


#КонецОбласти


#Область СлужебныеПроцедурыНаСервере


&НаСервере
Процедура УстановитьПараметрыДинамическихСписков()
	Список.Параметры.УстановитьЗначениеПараметра(
		"КонтрагентПоставщика", 
		КонтрагентПоставщика);
КонецПроцедуры


#КонецОбласти
