
&НаСервереБезКонтекста
Процедура ПереместитьНаСервере(Ссылка, Направление)
		
	Справочники.СтадииПроектов.ПереместитьСтадию(Ссылка, Направление);
	
КонецПроцедуры

&НаКлиенте
Процедура ПереместитьНаКлиенте(Направление)
	ТекДанные = Элементы.СтадииГруппы.ТекущиеДанные;
	Если ТекДанные = Неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Если ТекДанные.ЭтоГруппа Тогда
		Возврат;
	КонецЕсли;
	
	ПереместитьНаСервере(ТекДанные.Ссылка, Направление);
	
	Элементы.СтадииГруппы.Обновить();
	
КонецПроцедуры

&НаКлиенте
Процедура ПереместитьВверх(Команда)
	ПереместитьНаКлиенте(-1);
КонецПроцедуры

&НаКлиенте
Процедура ПереместитьВниз(Команда)
	ПереместитьНаКлиенте(1);
КонецПроцедуры

&НаСервере
Процедура УстановитьОтборСтадий()
	Если ЗначениеЗаполнено(ОБъект.Ссылка) Тогда
		ОтборыСписковКлиентСерверУХ.ИзменитьЭлементОтбораСписка(СтадииГруппы, "Родитель", Объект.Ссылка, Истина);
	Иначе
		ОтборыСписковКлиентСерверУХ.ИзменитьЭлементОтбораСписка(СтадииГруппы, "Родитель", Неопределено, Истина);
	КонецЕсли;
КонецПроцедуры


&НаСервере
Процедура ПослеЗаписиНаСервере(ТекущийОбъект, ПараметрыЗаписи)
	УстановитьОтборСтадий();
КонецПроцедуры


&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	УстановитьОтборСтадий();
КонецПроцедуры

