
&НаКлиенте
Процедура ОбработкаКоманды(ПараметрКоманды, ПараметрыВыполненияКоманды)
	
	ЗаполнитьПоМСФО()
	//ОткрытьФорму("Справочник.ВидыВременныхРазниц.ФормаСписка", ПараметрыФормы, ПараметрыВыполненияКоманды.Источник, ПараметрыВыполненияКоманды.Уникальность, ПараметрыВыполненияКоманды.Окно, ПараметрыВыполненияКоманды.НавигационнаяСсылка);
КонецПроцедуры

&НаСервере
Процедура ЗаполнитьПоМСФО()

	Запрос = Новый Запрос(
	"ВЫБРАТЬ
	|	т.ШаблонТрансляцииПараллельныйУчет КАК Шаблон
	|ПОМЕСТИТЬ втШаблоны
	|ИЗ
	|	РегистрСведений.ОсновныеШаблоныТрансляцииПлановСчетов.СрезПоследних КАК т
	|;
	|
	|////////////////////////////////////////////////////////////////////////////////
	|ВЫБРАТЬ
	|	т.СчетИсточник КАК СчетИсточник,
	|	МАКСИМУМ(т.СчетПриемник) КАК СчетПриемник,
	|	МАКСИМУМ(т.СчетПриемник.ВидОтложенногоНалога) КАК СчетПриемникВидОтложенногоНалога
	|ИЗ
	|	Справочник.СоответствияСчетовДляТрансляции КАК т
	|ГДЕ
	|	т.СчетИсточник.ВидОтложенногоНалога = ЗНАЧЕНИЕ(Справочник.ВидыВременныхРазниц.ПустаяСсылка)
	|	И т.СчетПриемник.ВидОтложенногоНалога <> ЗНАЧЕНИЕ(Справочник.ВидыВременныхРазниц.ПустаяСсылка)
	|	И НЕ т.ПометкаУдаления
	|	И т.Владелец В
	|			(ВЫБРАТЬ
	|				т.Шаблон
	|			ИЗ
	|				втШаблоны КАК т)
	|	И НЕ т.СчетИсточник.Забалансовый
	|
	|СГРУППИРОВАТЬ ПО
	|	т.СчетИсточник
	|
	|ИМЕЮЩИЕ
	|	КОЛИЧЕСТВО(РАЗЛИЧНЫЕ т.СчетПриемник.ВидОтложенногоНалога) = 1");
	
	Выборка = Запрос.Выполнить().Выбрать();
	Пока Выборка.Следующий() Цикл
		ОбъектСчет = Выборка.СчетИсточник.ПолучитьОбъект();
		ОбъектСчет.ВидОтложенногоНалога = Выборка.СчетПриемникВидОтложенногоНалога;
		ОбъектСчет.Записать();
	КонецЦикла; 

КонецПроцедуры

