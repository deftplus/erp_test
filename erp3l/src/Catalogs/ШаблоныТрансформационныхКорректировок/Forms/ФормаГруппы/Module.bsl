&НаСервере
Процедура ОбновитьРегистрБухгалтерии()
	
	МассивРегистров=УправлениеОтчетамиУХ.ПолучитьМассивРегистровБухгалтерии(Объект.ПланСчетов);	
	Элементы.РегистрБухгалтерии.СписокВыбора.Очистить();
	
	Для Каждого Регистр ИЗ МассивРегистров Цикл
		
		Элементы.РегистрБухгалтерии.СписокВыбора.Добавить(Регистр);
		
	КонецЦикла;
	
	Если Элементы.РегистрБухгалтерии.СписокВыбора.Количество()>0 Тогда
		
		Если НЕ Объект.РегистрБухгалтерии=Элементы.РегистрБухгалтерии.СписокВыбора[0].Значение Тогда	
			
			Объект.РегистрБухгалтерии=Элементы.РегистрБухгалтерии.СписокВыбора[0].Значение;
			
		КонецЕсли;
		
	КонецЕсли;
	
	Элементы.РегистрБухгалтерии.Видимость=(НЕ Элементы.РегистрБухгалтерии.СписокВыбора.Количество()=1);
		
КонецПроцедуры // ОбновитьРегистрБухгалтерии()

&НаСервере
Процедура УстановитьВидимость()
	
	Элементы.ВидОперации.ТолькоПросмотр			= ЗначениеЗаполнено(Объект.Родитель.ВидОперации);
	Элементы.ПланСчетов.ТолькоПросмотр			= ЗначениеЗаполнено(Объект.Родитель.ПланСчетов);
	Элементы.РегистрБухгалтерии.ТолькоПросмотр	= ЗначениеЗаполнено(Объект.Родитель.РегистрБухгалтерии);
			
КонецПроцедуры

&НаКлиенте
Процедура ПланСчетовПриИзменении(Элемент)
	
	ОбновитьРегистрБухгалтерии();
	
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Ключ.Пустая() И (Не ЗначениеЗаполнено(Параметры.ЗначениеКопирования)) Тогда
		
		Справочники.ШаблоныТрансформационныхКорректировок.ЗаполнитьРеквизитыПоРодителю(Объект);
		
	КонецЕсли;
	
	ОбновитьРегистрБухгалтерии();
	УстановитьВидимость();
		
КонецПроцедуры


