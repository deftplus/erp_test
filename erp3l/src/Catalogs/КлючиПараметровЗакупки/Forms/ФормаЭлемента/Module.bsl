
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	СформироватьДеревоПараметровЗакупки();
	
	ТолькоПросмотр = Истина;
	
КонецПроцедуры


&НаСервере
Процедура СформироватьДеревоПараметровЗакупки()
	
	ТаблицаПараметров = РеквизитФормыВЗначение("ТаблицаПараметровЗакупки");
	
	ПараметрыЗакупки = ПланыВидовХарактеристик.ПараметрыЗакупки.ПолучитьТаблицуНастроекПараметровЗакупки();
	
	Для Каждого ПараметрЗакупки Из ПараметрыЗакупки Цикл
		
		//
		Строка = ТаблицаПараметров.Добавить();
		Строка.Параметр = ПараметрЗакупки.Параметр;
		Строка.ТипЗначения = ПараметрЗакупки.ТипЗначения;
		Строка.Значение = Объект[ПараметрЗакупки.ПараметрИмя];
		Строка.ЗапретИзменения = Объект["ЗапретИзменения_"+ПараметрЗакупки.ПараметрИмя];
		Строка.ИндексКартинки = ?(Строка.ЗапретИзменения, 0, 1);
		
	КонецЦикла;
	
	ЗначениеВРеквизитФормы(ТаблицаПараметров, "ТаблицаПараметровЗакупки");
	
КонецПроцедуры