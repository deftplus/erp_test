////////////////////////////////////////////////////////////////////////////////
// ВСПОМОГАТЕЛЬНЫЕ ФУНКЦИИ.
//

&НаКлиенте
Процедура ПереключитьСтраницуГлавнойПанели()
	
	Элементы.ГлавнаяПанель.ТекущаяСтраница = ?(МаршрутСогласования.Пустая(), Элементы.ПустойМаршрут, Элементы.ОбычныйРежим);
	
КонецПроцедуры

&НаКлиенте
Процедура ПрименитьОтборПоВладельцу()
	
	ТиповыеОтчеты_КлиентУХ.ДобавитьОтбор(Список.Отбор, "Владелец", МаршрутСогласования);
	
КонецПроцедуры

////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ФОРМЫ.
//

&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	ПолеВладелец = Новый ПолеКомпоновкиДанных("Владелец");
	Для Каждого Элемент Из Список.Отбор.Элементы Цикл
		Если Элемент.ЛевоеЗначение = ПолеВладелец И Элемент.Использование Тогда
			МаршрутСогласования = Элемент.ПравоеЗначение;
			Прервать;
		КонецЕсли;
	КонецЦикла;
	ПереключитьСтраницуГлавнойПанели();
	ОбщегоНазначенияКлиентСерверУХ.УстановитьЭлементОтбора(Список.Отбор,"ДинамическийЭтап",Ложь,ВидСравненияКомпоновкиДанных.Равно,,Истина);
	
КонецПроцедуры


////////////////////////////////////////////////////////////////////////////////
// ПРОЦЕДУРЫ - ОБРАБОТЧИКИ СОБЫТИЙ ЭЛЕМЕНТОВ ФОРМЫ.
//
&НаКлиенте
Процедура МаршрутСогласованияПриИзменении(Элемент)
	
	ПрименитьОтборПоВладельцу();
	ПереключитьСтраницуГлавнойПанели();
	
КонецПроцедуры

&НаКлиенте
Процедура КонструкторМаршрутаНажатие(Элемент)
	
КонецПроцедуры

&НаКлиенте
Процедура ПоказатьЭтапыПоТребованию(Команда)
	
	Если  НЕ Элементы.ФормаПоказатьЭтапыПоТребованию.Пометка Тогда
		ОбщегоНазначенияКлиентСерверУХ.УстановитьЭлементОтбора(Список.Отбор,"ДинамическийЭтап",Ложь,ВидСравненияКомпоновкиДанных.Равно,,Истина);	
	Иначе
		ОбщегоНазначенияКлиентСерверУХ.УстановитьЭлементОтбора(Список.Отбор,"ДинамическийЭтап",Ложь,ВидСравненияКомпоновкиДанных.Равно,,Ложь);	
	КонецЕсли;
	
	Элементы.ФормаПоказатьЭтапыПоТребованию.Пометка = НЕ  Элементы.ФормаПоказатьЭтапыПоТребованию.Пометка;
	
КонецПроцедуры



