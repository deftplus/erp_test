#Область ОбработчикиСобытийФормы

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Отбор.Свойство("Периодичность") И ЗначениеЗаполнено(Параметры.Отбор.Периодичность) Тогда
		Элементы.Список.Отображение=ОтображениеТаблицы.Список;		
	Иначе		
		Элементы.Список.Отображение=ОтображениеТаблицы.ИерархическийСписок;		
	КонецЕсли;
	
	Если Параметры.Отбор.Свойство("ТолькоПериодыГода") Тогда
		
		//
		ОбщегоНазначенияКлиентСервер.ДобавитьЭлементКомпоновки(Список.КомпоновщикНастроек.ФиксированныеНастройки.Отбор,
		 "ДатаНачала.ДатыНачала.НачалоГода", ВидСравненияКомпоновкиДанных.Равно, Параметры.Отбор.ТолькоПериодыГода,,Истина);
		
		Параметры.Отбор.Удалить("ТолькоПериодыГода");
		
	КонецЕсли;
	
	УправлениеФормойУХ.УстановитьПредставлениеОтбора(ЭтотОбъект,,Метаданные.Справочники.Периоды);
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийЭлементовШапкиФормы
	
#КонецОбласти

#Область ОбработчикиСобытийЭлементовТаблицыФормыСписок
	
#КонецОбласти

#Область ОбработчикиКомандФормы

&НаКлиенте
Процедура РеструктурироватьПериоды(Команда)
	
	РеструктурироватьПериодыСервер();
	
КонецПроцедуры

&НаКлиенте
Процедура ЗаполнитьПериод(Команда)
	
	Если ЗначениеЗаполнено(Элементы.Список.ТекущаяСтрока) Тогда
		ОткрытьФорму("Справочник.Периоды.Форма.ФормаЗаполненияПериодовУправляемая", Новый Структура("ПериодРодитель", Элементы.Список.ТекущаяСтрока), ЭтаФорма);
	КонецЕсли;

КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

&НаСервере
Процедура РеструктурироватьПериодыСервер()
	
	Справочники.Периоды.РеструктурироватьПериоды();
	
КонецПроцедуры

#КонецОбласти

