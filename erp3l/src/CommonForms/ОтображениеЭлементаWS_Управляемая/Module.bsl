
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Если Параметры.Свойство("Расшифровка", Расшифровка) Тогда
		
		Параметры.Свойство("ИспользуемаяИБ", ИспользуемаяИБ);
		
		ПараметрыОбъекта=Новый ХранилищеЗначения(Расшифровка, Новый СжатиеДанных(9));
		
		База = УправлениеСоединениямиВИБУХ.ПолучитьСоединение(ИспользуемаяИБ, 1);
		
		Если ТипЗнч(База) = Тип("WSПрокси") Тогда
			
			ПараметрыПодключения=Новый ХранилищеЗначения(Новый Структура);
			ДанныеДляОтображения=База.GetObjectRepresentation(ПараметрыОбъекта,ПараметрыПодключения).Получить();
			
		Иначе
			
			ОбработкаОбъект=Обработки.УниверсальнаяОтчетностьПоРегистрамУХ.Создать();
			ОбработкаОбъект.ПараметрыОбъектаДляОтображения=ПараметрыОбъекта;
			ОбработкаОбъект.ТекСоединениеВИБ=База;
			
			ДанныеДляОтображения=ОбработкаОбъект.ПолучитьОтображениеОбъектаБД();
						
		КонецЕсли;
		
		ПолеТабличногоДокумента.Вывести(ДанныеДляОтображения.ТабличныйДокумент);
		Заголовок=ДанныеДляОтображения.НаименованиеФормы;
	
	Иначе
		
		Отказ = Истина;
		
	КонецЕсли;
	
КонецПроцедуры

&НаКлиенте
Процедура ПолеТабличногоДокументаОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	
	СтандартнаяОбработка = Ложь;
	ОткрытьФорму("ОбщаяФорма.ОтображениеЭлементаWS_Управляемая", Новый Структура("Расшифровка, ИспользуемаяИБ", Расшифровка, ИспользуемаяИБ));
	
КонецПроцедуры
