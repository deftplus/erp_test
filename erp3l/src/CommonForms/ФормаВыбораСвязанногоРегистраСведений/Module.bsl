
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Список.Параметры.УстановитьЗначениеПараметра("ТипБД", Параметры.ТипБД);
    Список.Параметры.УстановитьЗначениеПараметра("СправочникБД", Параметры.СправочникБД);
	
	ТекущаяИБ=(Параметры.ТипБД=Справочники.ТипыБазДанных.ТекущаяИБ);
	
КонецПроцедуры

&НаКлиенте
Процедура СписокВыбор(Элемент, ВыбраннаяСтрока, Поле, СтандартнаяОбработка)
	
	СтруктураОтвета=Новый Структура;
	СтруктураОтвета.Вставить("РегистрСведенийБД",Элементы.Список.ТекущиеДанные.РегистрСведенийБД);
	
	Если ТекущаяИБ Тогда
		
		СтруктураОтвета.Вставить("ИзмерениеРегистраТек",Элементы.Список.ТекущиеДанные.ИмяПоля);
		
	Иначе
		
		СтруктураОтвета.Вставить("ИзмерениеРегистраВИБ",Элементы.Список.ТекущиеДанные.ИмяПоля);
		
	КонецЕсли;	
	
	Оповестить("ВыбраныДанныеСвязанногоРегистраСведений",СтруктураОтвета);
	Закрыть();
	
КонецПроцедуры
