
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	Бланк = Параметры.Бланк;
	
	Элементы.ВариантыДиаграммы.СписокВыбора.Очистить();
	
	Для Каждого СтрВариант Из ТипДиаграммы Цикл
		
		Элементы.ВариантыДиаграммы.СписокВыбора.Добавить(СтрВариант,СтрВариант);
		
	КонецЦикла;	  
	
	Если Параметры.ВариантОтображения Тогда
		 ВариантОтображения = "Диаграмма";
	Иначе	
		ВариантОтображения = "Таблица";
	КонецЕсли;
	
	ВариантОтображенияИтогов = Параметры.ВариантОтображенияИтогов;
	
	МасштабОтображения = Параметры.МасштабОтображения;
	
	ТочностьОтображения = Параметры.ТочностьОтображения;
	
	ВариантОтображенияДиаграммы = Параметры.ВариантОтображенияДиаграммы;
	
	Элементы.ВариантыДиаграммы.Видимость = ВариантОтображения = "Диаграмма";

	Если Не ЗначениеЗаполнено(ВариантОтображенияДиаграммы) Тогда
		
		ВариантОтображенияДиаграммы =  ТипДиаграммы.ГистограммаОбъемная

	КонецЕсли;	
	
КонецПроцедуры

&НаКлиенте
Процедура Применить(Команда)
	
	СтруктураПараметров = Новый Структура;
	СтруктураПараметров.Вставить("Бланк",Бланк);
	СтруктураПараметров.Вставить("ВариантОтображения",ВариантОтображения);
	СтруктураПараметров.Вставить("ВариантОтображенияИтогов",ВариантОтображенияИтогов);
    СтруктураПараметров.Вставить("МасштабОтображения",МасштабОтображения);	
	СтруктураПараметров.Вставить("ТочностьОтображения",ТочностьОтображения);
	СтруктураПараметров.Вставить("ВариантОтображенияДиаграммы",ВариантОтображенияДиаграммы);
	
	Оповестить("СТ_ИзмененыНастройкиПредставления",СтруктураПараметров);
	Закрыть();
		
КонецПроцедуры

&НаКлиенте
Процедура ВариантОтображенияПриИзменении(Элемент)
	
	Элементы.ВариантыДиаграммы.Видимость = ВариантОтображения = "Диаграмма";
	
КонецПроцедуры
