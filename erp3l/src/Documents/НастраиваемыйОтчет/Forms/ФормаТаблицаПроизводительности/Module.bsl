
&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	СтруктураПараметров=ПолучитьИзВременногоХранилища(Параметры.РабочийОбъектАдрес);
	
	Макет= Документы.НастраиваемыйОтчет.ПолучитьМакет("МакетТаблицаПроизводительности");
	
	ОбластиРасшифровки = Новый Структура;
	
	ОбластиРасшифровки.Вставить("ОбластьШапка"			,Макет.ПолучитьОбласть("ОбластьШапка"));
	ОбластиРасшифровки.Вставить("ОбластьДанныеРасчета"  , Макет.ПолучитьОбласть("ОбластьДанныеРасчета"));
	ОбластиРасшифровки.Вставить("ОбластьИтого"          , Макет.ПолучитьОбласть("ОбластьИтого"));
	
	ЗаполнитьЗначенияСвойств(ОбластиРасшифровки.ОбластьШапка.Параметры,СтруктураПараметров);
	
	ПолеТабличногоДокумента.Вывести(ОбластиРасшифровки.ОбластьШапка);
	
	ИтогоРасчетОперандов	= СтруктураПараметров.ДополнительныеСвойства.ТаблицаПроизводительности.Итог("РасчетОперандов");
	ИтогоРасчетПоказателя	= СтруктураПараметров.ДополнительныеСвойства.ТаблицаПроизводительности.Итог("РасчетПоказателя");
	ИтогоРасчетИтого		= СтруктураПараметров.ДополнительныеСвойства.ТаблицаПроизводительности.Итог("РасчетИтого");
	
	Для Каждого Строка ИЗ СтруктураПараметров.ДополнительныеСвойства.ТаблицаПроизводительности Цикл
		
		ЗаполнитьЗначенияСвойств(ОбластиРасшифровки.ОбластьДанныеРасчета.Параметры,Строка);
		
		ОбластиРасшифровки.ОбластьДанныеРасчета.Параметры.РасчетИтогоПроцент=(Строка.РасчетИтого/ИтогоРасчетИтого)*100;
		
		ПолеТабличногоДокумента.Вывести(ОбластиРасшифровки.ОбластьДанныеРасчета);
		
	КонецЦикла;
		
	ОбластиРасшифровки.ОбластьИтого.Параметры.ИтогоРасчетОперандов=ИтогоРасчетОперандов;
	ОбластиРасшифровки.ОбластьИтого.Параметры.ИтогоРасчетПоказателя=ИтогоРасчетПоказателя;
	ОбластиРасшифровки.ОбластьИтого.Параметры.ИтогоРасчетИтого=ИтогоРасчетИтого;
	
	ПолеТабличногоДокумента.Вывести(ОбластиРасшифровки.ОбластьИтого);
			
КонецПроцедуры

&НаКлиенте
Процедура ПолеТабличногоДокументаОбработкаРасшифровки(Элемент, Расшифровка, СтандартнаяОбработка)
	
	СтандартнаяОбработка=Ложь;
	
	Если ВладелецФормы=Неопределено Тогда
		
		СтруктураПараметров=Новый Структура;
		СтруктураПараметров.Вставить("АдресХранилищаПеременныхДляРасчета",Параметры.РабочийОбъектАдрес);
		СтруктураПараметров.Вставить("ПоказательОтчета",Расшифровка);
		
		ОткрытьФорму("Обработка.РасшифровкаРассчитанныхЗначений.Форма",СтруктураПараметров);
		
	Иначе
		
		МассивПоказателей=Новый Массив;
		МассивПоказателей.Добавить(Расшифровка);
		
		СтруктураПараметров=Новый Структура;
		СтруктураПараметров.Вставить("РабочийОбъектАдрес",Параметры.РабочийОбъектАдрес);
		СтруктураПараметров.Вставить("МассивКодовПоказателей",МассивПоказателей);
		
		ОткрытьФорму("Документ.НастраиваемыйОтчет.Форма.РасшифровкаПоказателейУправляемая",СтруктураПараметров,ВладелецФормы);
		
	КонецЕсли;
	
КонецПроцедуры
