
&НаКлиенте
Процедура Ок(Команда)
	
	СтруктураОтвета=Новый Структура;
	СтруктураОтвета.Вставить("Организация",		Организация);
	СтруктураОтвета.Вставить("ПериодОтчета",	ПериодОтчета);
	СтруктураОтвета.Вставить("ОрганизацииИзУОП",ОрганизацииИзУОП=1);
	СтруктураОтвета.Вставить("ПериодыИзУОП",	ПериодыИзУОП=1);
	
	Закрыть(СтруктураОтвета);
		
КонецПроцедуры

&НаСервере
Процедура ПриСозданииНаСервере(Отказ, СтандартнаяОбработка)
	
	УправлениеПериодом=Параметры.УправлениеПериодом;
	
	ДанныеСписков=Документы.КорректировкаЗначенийПоказателей.ПолучитьВозможныеПериодыОрганизации(УправлениеПериодом);
	
	МассивЗначенийПериодов  = Новый ФиксированныйМассив(ДанныеСписков.Периоды);
	
	Если МассивЗначенийПериодов.Количество()=1 Тогда
		
		ПериодОтчета=МассивЗначенийПериодов[0];
		Элементы.ПериодОтчета.ТолькоПросмотр=Истина;
		ПериодыИзУОП=0;
		Элементы.ПериодыИзУОП.ТолькоПросмотр=Истина;
		
	Иначе
		
		НовыйПараметр = Новый ПараметрВыбора("Отбор.Ссылка", МассивЗначенийПериодов);
		НовыйМассив = Новый Массив();
		НовыйМассив.Добавить(НовыйПараметр);
		НовыеПараметры = Новый ФиксированныйМассив(НовыйМассив);
		Элементы.ПериодОтчета.ПараметрыВыбора = НовыеПараметры;
		
	КонецЕсли;
	
	МассивЗначенийОрганизаций  = Новый ФиксированныйМассив(ДанныеСписков.Организации);
	
	Если МассивЗначенийОрганизаций.Количество()=1 Тогда
		
		Организация=МассивЗначенийОрганизаций[0];
		Элементы.Организации.ТолькоПросмотр=Истина;
		ОрганизацииИзУОП=0;
		Элементы.ОрганизацииИзУОП.ТолькоПросмотр=Истина;
		
	Иначе
		
		НовыйПараметр = Новый ПараметрВыбора("Отбор.Ссылка", МассивЗначенийОрганизаций);
		НовыйМассив = Новый Массив();
		НовыйМассив.Добавить(НовыйПараметр);
		НовыеПараметры = Новый ФиксированныйМассив(НовыйМассив);
		Элементы.Организация.ПараметрыВыбора = НовыеПараметры;
		
	КонецЕсли;

КонецПроцедуры
