
#Если Сервер Или ТолстыйКлиентОбычноеПриложение Или ВнешнееСоединение Тогда

Процедура ОбработкаЗаполнения(ДанныеЗаполнения, СтандартнаяОбработка)
	Если ИдентификацияПродуктаУХКлиентСервер.ЭтоУправлениеХолдингом() Тогда
		ИнициализироватьДокумент(ДанныеЗаполнения);
	КонецЕсли;
		
КонецПроцедуры

Процедура ПриКопировании(ОбъектКопирования)
	
	ИнициализироватьДокумент();
	
КонецПроцедуры

Процедура ОбработкаПроведения(Отказ, РежимПроведения)
	
	ПроведениеСерверУХ.ИнициализироватьДополнительныеСвойстваДляПроведения(Ссылка, ДополнительныеСвойства, РежимПроведения);
	Документы.РегламентнаяОперацияПериодаВНАМСФО.ПодготовитьПараметрыПроведения(ДополнительныеСвойства, Отказ);
	
	Если Отказ Тогда
		Возврат;
	КонецЕсли;
	
	Если НЕ ДополнительныеСвойства.ДляПроведения.Реквизиты.ФормироватьПроводкиМСФО Тогда
		
		ТрансформационныеКорректировкиУХ.СформироватьКорректировку(ДополнительныеСвойства.ДляПроведения.Реквизиты, Отказ);
		
		ДополнительныеСвойства.ДляПроведения.Реквизиты.Вставить("ВидОперации",			 Справочники.ВидыОпераций.ПовторРеклассаСчетовВНА);
		ДополнительныеСвойства.ДляПроведения.Реквизиты.Вставить("ИсточникКорректировки", "ПовторРеклассовВНА");
		ТрансформационныеКорректировкиУХ.СформироватьКорректировку(ДополнительныеСвойства.ДляПроведения.Реквизиты, Отказ);
		
	КонецЕсли;
	
КонецПроцедуры

Процедура ПередЗаписью(Отказ, РежимЗаписи, РежимПроведения)
	ПроведениеСерверУХ.ПередЗаписью(ЭтотОбъект, Отказ, РежимЗаписи, РежимПроведения);		
КонецПроцедуры

Процедура ОбработкаУдаленияПроведения(Отказ)		
	ПроведениеСерверУХ.ОбработкаУдаленияПроведения(ЭтотОбъект, Отказ);
КонецПроцедуры

Процедура ИнициализироватьДокумент(ДанныеЗаполнения = Неопределено)
	
	МСФОУХ.ОбработкаЗаполнения(ЭтотОбъект, ДанныеЗаполнения);
	
	ЭтотОбъект.РежимКорректировки = МСФОВызовСервераУХ.ЗначениеУП(
			"РежимТрансформационнойКорректировки", Организация, Дата, Сценарий);
	
КонецПроцедуры

#КонецЕсли
