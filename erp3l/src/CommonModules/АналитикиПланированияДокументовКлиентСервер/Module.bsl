#Область ПрограммныйИнтерфейс
	
#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

Функция УдалитьИмяРеквизитаФормыАналитикиПланированияДокумента() Экспорт
	Возврат "АналитикиПланированияДокумента";
КонецФункции

Функция ИмяЭлементаФормыДекорацияАналитикиПланированияДокумента() Экспорт
	Возврат "ДекорацияАналитикиПланированияДокумента";
КонецФункции

Процедура ЗаполнитьЗаголовокДекорации(Форма) Экспорт
	
	ИмяЭлемента = ИмяЭлементаФормыДекорацияАналитикиПланированияДокумента();
	Если Форма.Элементы.Найти(ИмяЭлемента) = неопределено Тогда
		Возврат;
	КонецЕсли;
	
	Элемент = Форма.Элементы[ИмяЭлемента];
	
	ШаблонЕстьАналитики = НСтр("ru = 'ЦФО - %1; Проект - %2; Статья бюджета - %3'");
	
	
	СтруктураПоиска = Новый Структура;
	СтруктураПоиска.Вставить("ВидБюджета", ПредопределенноеЗначение("ПланВидовХарактеристик.ВидыБюджетов.БюджетДвиженияДенежныхСредств"));
	
	Таблица = Форма.Объект.АналитикиПланирования;
	Строки = Таблица.НайтиСтроки(СтруктураПоиска);
	Если Строки.Количество() = 0 Тогда
		СтрокаАналитикиОплаты = НСтр("ru = '<Не заданы>'");
	Иначе
		Строка = Строки[0];
		СтрокаАналитикиОплаты = СтрШаблон(ШаблонЕстьАналитики, 
			?(ЗначениеЗаполнено(Строка.ЦФО), Строка.ЦФО, НСтр("ru = '<не указан>'")), 
			?(ЗначениеЗаполнено(Строка.Проект), Строка.Проект, НСтр("ru = '<без проекта>'")),
			?(ЗначениеЗаполнено(Строка.СтатьяБюджета), Строка.СтатьяБюджета, НСтр("ru = '<не указана>'")));
	КонецЕсли;
	
	СтрокаАналитикиИсполнения = "";
	
	Для Каждого Строка Из Таблица Цикл
		
		Если Строка.ВидБюджета = СтруктураПоиска.ВидБюджета Тогда
			Продолжить;
		КонецЕсли;
		
		СтрокаАналитикиИсполнения = СтрШаблон(ШаблонЕстьАналитики, 
			?(ЗначениеЗаполнено(Строка.ЦФО), Строка.ЦФО, НСтр("ru = '<не указан>'")), 
			?(ЗначениеЗаполнено(Строка.Проект), Строка.Проект, НСтр("ru = '<без проекта>'")),
			?(ЗначениеЗаполнено(Строка.СтатьяБюджета), Строка.СтатьяБюджета, НСтр("ru = '<не указана>'")));
		Прервать;
	КонецЦикла;
	
	Шаблон = НСтр("ru = 'Оплата: %1
						|Поставка: %2'");
	
	Элемент.Заголовок = СтрШаблон(Шаблон, СтрокаАналитикиОплаты, СтрокаАналитикиИсполнения);
	Элемент.Ширина = 80;
	
КонецПроцедуры

Функция ТребуетсяОтражениеВБюджетировании(Источник) Экспорт
	
	Если Источник.РежимИспользованияГрафика = ПредопределенноеЗначение("Перечисление.РежимыИспользованияГрафика.КонтрольЛимитовИСозданиеПозиций")
		И Источник.ПорядокРасчетов <> ПредопределенноеЗначение("Перечисление.ПорядокРасчетов.ПоДоговорамКонтрагентов") Тогда
		Возврат Истина;
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

Функция ДолжныФормироватьсяПозиции(Источник) Экспорт
	
	Если Источник.РежимИспользованияГрафика = ПредопределенноеЗначение("Перечисление.РежимыИспользованияГрафика.КонтрольЛимитовИСозданиеПозиций")
		И Источник.ПорядокРасчетов <> ПредопределенноеЗначение("Перечисление.ПорядокРасчетов.ПоДоговорамКонтрагентов") Тогда
		Возврат Истина;
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции
	
#КонецОбласти
 