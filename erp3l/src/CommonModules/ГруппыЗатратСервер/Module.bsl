
#Область ПрограммныйИнтерфейс

// Функция возвращает представление группы затрат.
//	Параметры:
//		ЗначениеПолей - Структура - значения полей, идентифицирующих группу затрат.
//	Возвращаемое значение:
//		Строка - представление группы затрат.
//
Функция ПредставлениеГруппыЗатрат(ЗначениеПолей) Экспорт
	
	СписокПолей = ПереченьПолейПоГруппировкеЗатрат(ЗначениеПолей.ГруппировкаЗатрат);
	
	ПоляГруппыЗатрат = СтруктураГруппыЗатрат(СписокПолей);
	ЗаполнитьЗначенияСвойств(ПоляГруппыЗатрат, ЗначениеПолей);
	ПредставлениеГруппы = "";
	
	Для Каждого ТекПоле Из ПоляГруппыЗатрат Цикл
		
		ТекПредставление = Строка(ТекПоле.Значение);
		
		Если ЗначениеЗаполнено(ТекПредставление) Тогда
			ПредставлениеГруппы = ПредставлениеГруппы + ТекПредставление + " / ";
		КонецЕсли;
		
	КонецЦикла;
	
	Если ЗначениеЗаполнено(ПредставлениеГруппы) Тогда
		ПредставлениеГруппы = Лев(ПредставлениеГруппы, СтрДлина(ПредставлениеГруппы) - 3);
	Иначе
		ПредставлениеГруппы = НСтр("ru = '<группа с пустыми значениями>';
									|en = '<group with empty values>'", ОбщегоНазначения.КодОсновногоЯзыка());
	КонецЕсли;
	
	Возврат ПредставлениеГруппы;
	
КонецФункции

// Функция возвращает перечень идентифицирующих полей, соответствующих переданной группировке затрат.
//	Параметры:
//		ГруппировкаЗатрат - ПеречислениеСсылка.ГруппировкиЗатратВЗаказеПереработчику,
//							ПеречислениеСсылка.ГруппировкиЗатратВПроизводствеБезЗаказа - тип группировки затрат.
//	Возвращаемое значение:
//		СписокЗначений - перечень полей, идентифицирующих группу затрат.
//
Функция ПереченьПолейПоГруппировкеЗатрат(ГруппировкаЗатрат) Экспорт
	
	Если ТипЗнч(ГруппировкаЗатрат) = Тип("ПеречислениеСсылка.ГруппировкиЗатратВЗаказеПереработчику") Тогда
		СписокПолей = Документы.ОтчетПереработчика.ПереченьПолейГруппыЗатрат(ГруппировкаЗатрат);
	ИначеЕсли ТипЗнч(ГруппировкаЗатрат) = Тип("ПеречислениеСсылка.ГруппировкиЗатратВПроизводствеБезЗаказа") Тогда
		СписокПолей = Документы.ПроизводствоБезЗаказа.ПереченьПолейГруппыЗатрат(ГруппировкаЗатрат);
	Иначе
		СписокПолей = Новый СписокЗначений;
	КонецЕсли;
	
	Возврат СписокПолей;
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Возвращает структуру, содержащую перечень идентифицирующих группу затрат полей.
//	Параметры:
//		СписокПолей - СписокЗначений - перечень полей, идентифицирующих группу затрат.
//	Возвращаемое значение:
//		Структура - структура, содержащая перечень идентифицирующих группу затрат полей.
//
Функция СтруктураГруппыЗатрат(СписокПолей) Экспорт
	
	СтруктураГруппыЗатрат = Новый Структура;
	
	Для Каждого ТекПоле Из СписокПолей Цикл
		СтруктураГруппыЗатрат.Вставить(ТекПоле.Значение);
	КонецЦикла;
	
	Возврат СтруктураГруппыЗатрат;
	
КонецФункции

#КонецОбласти