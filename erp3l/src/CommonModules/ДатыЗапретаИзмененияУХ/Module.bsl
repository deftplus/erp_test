
#Область ПрограммныйИнтерфейс

Процедура ЗаполнитьИсточникиДанныхДляПроверкиЗапретаИзменения(ИсточникиДанных) Экспорт
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВводВНАВЭксплуатациюМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВводНачальныхОстатковВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВводСведенийВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВводСведенийОФинансовыхИнструментах", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВводСобытийВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВосстановлениеВНАИзРасходов", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВыбытиеВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВыбытиеИнвестиций", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ВыработкаВНА", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ИзменениеПараметровВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.КонсолидационныеПоправки", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.МодернизацияВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.НачислениеАмортизацииВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.НачислениеОперацийМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ОбесценениеВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ОперацияМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПереоценкаВалютныхАктивовОбязательств", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПереоценкаВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПереоценкаФинансовыхИнструментов", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПовторениеКорректировокПрошлыхПериодов", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПоступлениеВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПоступлениеИнвестиций", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПризнаниеРасходовПоАмортизацииНСБУ", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.ПризнаниеРасходовФинансовыхИнструментов", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РасчетОтложенныхНалогов", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РасчетСебестоимости", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РасчетФинансовогоРезультата", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РегламентнаяОперацияПериодаВНАМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РегламентнаяОперацияПериодаПоФинансовымИнструментамМСФО", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РезервыПоДЗИАвансамВыданным", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РезервыПоЗапасам", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РезервыПоПретензиям", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РеклассОтложенныхНалогов", "Дата" , "УчетПоМСФО", "Организация");
	ДатыЗапретаИзмененияДобавитьСтроку(ИсточникиДанных, "Документ.РеформацияБаланса", "Дата" , "УчетПоМСФО", "Организация");
	
	ДатыЗапретаИзменения.ДобавитьСтроку(ИсточникиДанных, "РегистрБухгалтерии.МСФО", "Период", "УчетПоМСФО", "Организация");
	
КонецПроцедуры

// Заполняет разделы дат запрета изменения, используемые при настройке дат запрета.
// Если не указать ни одного раздела, тогда будет доступна только настройка общей даты запрета.
//
// Параметры:
//  Разделы - ТаблицаЗначений - с колонками:
//   * Имя - Строка - имя используемое в описании источников данных в
//       процедуре ЗаполнитьИсточникиДанныхДляПроверкиЗапретаИзменения.
//
//   * Идентификатор - УникальныйИдентификатор - идентификатор ссылки элемента плана видов характеристик.
//       Чтобы получить идентификатор нужно в режиме 1С:Предприятия выполнить метод платформы:
//       "ПланыВидовХарактеристик.РазделыДатЗапретаИзменения.ПолучитьСсылку().УникальныйИдентификатор()".
//       Не следует указывать идентификаторы, полученные любым другим способом,
//       так как это может нарушить их уникальность.
//
//   * Представление - Строка - представляет раздел в форме настройки дат запрета.
//
//   * ТипыОбъектов  - Массив - типы ссылок объектов в разрезе которых можно настроить даты запрета,
//       например, Тип("СправочникСсылка.Организации"), если не указано ни одного типа,
//       то даты запрета будут настраиваться только с точностью до раздела.
//
Процедура ПриЗаполненииРазделовДатЗапретаИзменения(Разделы) Экспорт
	
	Раздел = Разделы.Добавить();
	Раздел.Имя  = "УчетПоМСФО";
	Раздел.Идентификатор = Новый УникальныйИдентификатор("8a725811-e24d-4522-8995-070a4c2d0784");
	Раздел.Представление = НСтр("ru = 'Учет по МСФО'");
	Раздел.ТипыОбъектов.Добавить(Тип("СправочникСсылка.Организации"));
	//Раздел.ТипыОбъектов.Добавить(Тип("СправочникСсылка.Проекты"));

	
КонецПроцедуры

// Обработчик подписки на событие ПередЗаписью для проверки запрета изменения.
//
// Параметры:
//  Источник        - ДокументОбъект - объект данных, передаваемый в подписку на событие ПередЗаписью.
//  Отказ           - Булево - параметр, передаваемый в подписку на событие ПередЗаписью.
//  РежимЗаписи     - Булево - параметр, передаваемый в подписку на событие ПередЗаписью.
//  РежимПроведения - Булево - параметр, передаваемый в подписку на событие ПередЗаписью.
//
Процедура ПроверитьДатуЗапретаИзмененияПередЗаписьюДокумента(Источник, Отказ, РежимЗаписи, РежимПроведения) Экспорт
	ДатыЗапретаИзменения.ПроверитьДатуЗапретаИзмененияПередЗаписьюДокумента(Источник, Отказ, РежимЗаписи, РежимПроведения);
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

Процедура ДатыЗапретаИзмененияДобавитьСтроку(Данные, Таблица, ПолеДаты, Раздел, ПолеОбъекта)
	Найден = Ложь;
	Если СтрНачинаетсяС(ВРег(Таблица), ВРег("Документ")) Тогда
		Найден = Метаданные.Документы.Найти(Сред(Таблица, СтрНайти(Таблица, ".") + 1)) <> Неопределено;
	КонецЕсли;
	Если Найден Тогда
		ДатыЗапретаИзменения.ДобавитьСтроку(Данные, Таблица, ПолеДаты, Раздел, ПолеОбъекта);
	КонецЕсли;
КонецПроцедуры

#КонецОбласти