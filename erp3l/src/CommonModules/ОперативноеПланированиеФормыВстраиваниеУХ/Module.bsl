////////////////////////////////////////////////////////////////////////////////
// <Заголовок модуля: краткое описание и условия применения модуля.>
//  
////////////////////////////////////////////////////////////////////////////////
#Область ПрограммныйИнтерфейс

Процедура ИнициализироватьДвиженияОперации(ТабличнаяЧасть, Знач ВидБюджета, Знач ДобавлятьНовуюСтроку = Истина) Экспорт
	
	// Если Табличная часть пустая - нет смысла что-либо предпринимать.
	Если ТабличнаяЧасть.Количество() = 0 Тогда
		Если ДобавлятьНовуюСтроку Тогда
			ТабличнаяЧасть.Добавить();
		КонецЕсли;
		Возврат;
		
	КонецЕсли;
	
	ПараметрыБюджета = ДвиженияБюджетированиеКлиентСерверУХ.ПараметрыБюджета(ВидБюджета);
	ИмяКолонкиСтатья = ПараметрыБюджета.КолонкаСтатья;
	ПереченьСтатей = ТабличнаяЧасть.Выгрузить(,ИмяКолонкиСтатья).ВыгрузитьКолонку(ИмяКолонкиСтатья);
	
	НастройкиСтатей = ДвиженияБюджетированиеУХ.ВидыАналитикСтатей(ПереченьСтатей);	
	Для Каждого ТекСтрока Из ТабличнаяЧасть Цикл
		
		СтатьяБюджета = ТекСтрока[ИмяКолонкиСтатья];
		
		Если Не ЗначениеЗаполнено(СтатьяБюджета) Тогда
			Для Индекс = 1 По 3 Цикл
				ТекСтрока["ВидАналитики" + Индекс] = Неопределено;
			КонецЦикла;
			
			Продолжить;
		КонецЕсли;
		
		НастройкиСтатьи = НастройкиСтатей.Найти(СтатьяБюджета, "СтатьяБюджета");
		Если НастройкиСтатьи <> Неопределено Тогда
			ЗаполнитьЗначенияСвойств(ТекСтрока, НастройкиСтатьи);
		КонецЕсли;
	КонецЦикла;
	
КонецПроцедуры

Процедура ПодготовитьФормуДокументаДДС(Форма) Экспорт
	
	Объект = Форма.Объект;
	Элементы = Форма.Элементы;
	
	Если ДенежныеСредстваВстраиваниеУХ.ЕстьРасшифровкаПлатежаДокументаДДС(Объект) Тогда
	
		ИнициализироватьДвиженияОперации(
			Форма.Объект.РасшифровкаПлатежа, 
			Перечисления.ПредназначенияЭлементовСтруктурыОтчета.БюджетДвиженияДенежныхСредств,
			Ложь);
	Иначе
		ОперативноеПланированиеФормыУХКлиентСервер.ЗаполнитьСведенияОВидахАналитик(Объект.СтатьяДвиженияДенежныхСредств, Форма);
		ПоляАналитик = Новый Массив;
		//ПостфиксЭлемента = Форма.ПостфиксИмениЭлементаАналитик(Форма);
		ПостфиксЭлемента = Форма.ПостфиксИмениЭлементаАналитик();
		Для Сч = 1 По 3 Цикл
			ПоляАналитик.Добавить(Элементы["Аналитика" + Сч + ПостфиксЭлемента]);
		КонецЦикла;
		ОперативноеПланированиеФормыУХКлиентСервер.ИзменитьПараметрыВыбораАналитик(Объект, Форма,ПоляАналитик);
		ОперативноеПланированиеФормыУХКлиентСервер.УправлениеЭлементамиДополнительныхАналитик(Форма, ПоляАналитик);
	КонецЕсли;
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныйПрограммныйИнтерфейс

#КонецОбласти
