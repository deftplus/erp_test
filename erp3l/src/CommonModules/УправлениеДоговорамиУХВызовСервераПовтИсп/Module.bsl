#Область ПрограммныйИнтерфейс
// Функция возвращает элемент перечисления ВидыДоговоров, 
// соответствующий элементу перечисления ВидыДоговоровУХ.
Функция ВидДоговораБП(ВидДоговораУХ) Экспорт
	
	Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ВидДоговора");
	
КонецФункции

Функция ВидДоговораУХ(ВидДоговораБП) Экспорт
	
	// Сначала попробуем найти одноименный элемент. У него однозначный приоритет.
	ИмяЗначенияВидДоговора = ОбщегоНазначения.ИмяЗначенияПеречисления(ВидДоговораБП);
	ИменаПредопределенных = Метаданные.Справочники.ВидыДоговоровКонтрагентовУХ.ПолучитьИменаПредопределенных();
	Если ИменаПредопределенных.Найти(ИмяЗначенияВидДоговора) <> Неопределено Тогда
		Возврат Справочники.ВидыДоговоровКонтрагентовУХ[ИмяЗначенияВидДоговора];
	КонецЕсли;
	
	// Если одноименный элемент не нашли - берем первый подходящий.
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ ПЕРВЫЕ 1
	|	ВидыДоговоровКонтрагентовУХ.Ссылка КАК Ссылка
	|ИЗ
	|	Справочник.ВидыДоговоровКонтрагентовУХ КАК ВидыДоговоровКонтрагентовУХ
	|ГДЕ
	|	НЕ ВидыДоговоровКонтрагентовУХ.ЭтоГруппа
	|	И ВидыДоговоровКонтрагентовУХ.ВидДоговора = &ВидДоговораБП";
	
	Запрос.УстановитьПараметр("ВидДоговораБП", ВидДоговораБП);
	
	Выборка = Запрос.Выполнить().Выбрать();
	
	Если Выборка.Следующий() Тогда
		Возврат Выборка.Ссылка;
	Иначе
		Возврат Справочники.ВидыДоговоровКонтрагентовУХ.Прочее;
	КонецЕсли;
	
КонецФункции

Функция ЭтоДоговорФинансовогоИнструмента(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ЭтоФинансовыйИнструмент");
	Иначе
		Возврат Ложь;
	КонецЕсли;

	
КонецФункции

Функция ПолучитьВстречныйВидДоговораУХ(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ВстречныйВидДоговора");
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

Функция ПолучитьИмяДокументаПоВидуДоговора(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ИмяДокумента");
	Иначе
		Возврат "";
	КонецЕсли;

КонецФункции

Функция ПолучитьВидФинансовогоИнструментаПоВидуДоговора(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ВидФинансовогоИнструмента");
	Иначе
		Возврат Неопределено;
	КонецЕсли;
	
КонецФункции

Функция ДопустимыУсловныеЕдиницы(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ДопустимыУсловныеЕдиницы");
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

Функция ЭтоГруппаВидовДоговоров(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ЭтоГруппа");
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

Функция ПолучитьИмяСправочникаДоговора(ВидДоговораУХ) Экспорт
	
	Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ТипСправочникаДоговора");
	
КонецФункции

Функция ПолучитьМенеджерСправочникаДоговора(ВидДоговораУХ) Экспорт
	
	ИмяСправочникаДоговоры = ПолучитьИмяСправочникаДоговора(ВидДоговораУХ);
	
	Если ИмяСправочникаДоговоры = Неопределено Тогда
		Возврат Неопределено;
	Иначе
		Возврат Справочники[ИмяСправочникаДоговоры];
	КонецЕсли;
	
КонецФункции

Функция ПолучитьОбъектМетаданныхСправочникаДоговора(ВидДоговораУХ) Экспорт
	
	ИмяСправочникаДоговоры = ПолучитьИмяСправочникаДоговора(ВидДоговораУХ);
	
	Если ИмяСправочникаДоговоры = Неопределено Тогда
		Возврат Неопределено;
	Иначе
		Возврат Метаданные.Справочники[ИмяСправочникаДоговоры];
	КонецЕсли;
	
КонецФункции

Функция ПолучитьОперацииГрафикаПоВидуДоговора(ВидДоговораУХ) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ОперацииГрафиковДоговоров.Ссылка КАК ОперацияГрафика,
	|	ОперацииГрафиковДоговоров.ЭлементСтруктурыЗадолженности КАК ЭлементСтруктурыЗадолженности,
	|	ОперацииГрафиковДоговоров.ВидФинансовогоИнструмента КАК ВидФинансовогоИнструмента,
	|	ОперацииГрафиковДоговоров.КолонкаСекции КАК КолонкаСекции,
	|	ОперацииГрафиковДоговоров.ВидБюджета КАК ВидБюджета,
	|	ОперацииГрафиковДоговоров.НаправлениеДвижения КАК НаправлениеДвижения,
	|	ОперацииГрафиковДоговоров.НаправлениеВзаиморасчетов КАК НаправлениеВзаиморасчетов,
	|	ОперацииГрафиковДоговоров.ВидОперацииУХ КАК ВидОперацииУХ,
	|	ЕСТЬNULL(ПараметрыОперативногоПланирования.Использовать, ЛОЖЬ) КАК ИспользуетсяПланирование
	|ИЗ
	|	Справочник.ОперацииГрафиковДоговоров КАК ОперацииГрафиковДоговоров
	|		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.ПараметрыОперативногоПланирования КАК ПараметрыОперативногоПланирования
	|		ПО ОперацииГрафиковДоговоров.ВидБюджета = ПараметрыОперативногоПланирования.ВидБюджета
	|ГДЕ
	|	ОперацииГрафиковДоговоров.Родитель = &ГруппаОпераций";
	
	Запрос.УстановитьПараметр("ГруппаОпераций", ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ГруппаОперацийГрафика"));
	
	Возврат Запрос.Выполнить().Выгрузить();
	
КонецФункции

Функция ПараметрыОперацииГрафика(ОперацияГрафикаДоговора) Экспорт
	
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
	|	ОперацииГрафиковДоговоров.Ссылка КАК ОперацияГрафика,
	|	ОперацииГрафиковДоговоров.ЭлементСтруктурыЗадолженности КАК ЭлементСтруктурыЗадолженности,
	|	ОперацииГрафиковДоговоров.ВидФинансовогоИнструмента КАК ВидФинансовогоИнструмента,
	|	ОперацииГрафиковДоговоров.КолонкаСекции КАК КолонкаСекции,
	|	ОперацииГрафиковДоговоров.ВидБюджета КАК ВидБюджета,
	|	ОперацииГрафиковДоговоров.НаправлениеДвижения КАК НаправлениеДвижения,
	|	ОперацииГрафиковДоговоров.НаправлениеВзаиморасчетов КАК НаправлениеВзаиморасчетов,
	|	ОперацииГрафиковДоговоров.ВидОперацииУХ КАК ВидОперацииУХ
	|ИЗ
	|	Справочник.ОперацииГрафиковДоговоров КАК ОперацииГрафиковДоговоров
	|ГДЕ
	|	ОперацииГрафиковДоговоров.Ссылка = &ОперацияГрафикаДоговора";
	
	Запрос.УстановитьПараметр("ОперацияГрафикаДоговора", ОперацияГрафикаДоговора);
	ТабРезультат = Запрос.Выполнить().Выгрузить();
	Если ТабРезультат.Количество() Тогда
		
		Возврат ОбщегоНазначения.СтрокаТаблицыЗначенийВСтруктуру(ТабРезультат[0]);
	Иначе
		Возврат Неопределено;
		
	КонецЕсли;
	
КонецФункции

Функция ЭтоДоходныйДоговор(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ЭтоДоходныйДоговор");
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

Функция ЭтоРасходныйДоговор(ВидДоговораУХ) Экспорт
	
	Если ЗначениеЗаполнено(ВидДоговораУХ) Тогда
		Возврат ОбщегоНазначения.ЗначениеРеквизитаОбъекта(ВидДоговораУХ, "ЭтоРасходныйДоговор");
	Иначе
		Возврат Ложь;
	КонецЕсли;
	
КонецФункции

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

#КонецОбласти
